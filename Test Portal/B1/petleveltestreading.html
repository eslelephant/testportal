<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1 Reading Test - Speakers' Corner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="../js/persistentStorage.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            line-height: 1.6;
            color: #2d3748;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 600;
        }

        .test-info {
            text-align: right;
        }

        .test-info h2 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .test-info p {
            opacity: 0.9;
            font-size: 14px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .navigation {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .nav-parts {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-part {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: #f7fafc;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-decoration: none;
            color: #4a5568;
        }

        .nav-part.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .nav-part:hover {
            background: #e2e8f0;
        }

        .nav-part.active:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .test-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .part-header {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .part-title {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .part-instructions {
            color: #4a5568;
            font-size: 16px;
            line-height: 1.6;
        }

        .question {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: #f9fafb;
        }

        .question-number {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .text-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin-bottom: 15px;
            font-size: 15px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #cbd5e0;
            background: #f7fafc;
        }

        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .submit-section {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .next-btn {
            background: #48bb78;
        }

        .next-btn:hover {
            box-shadow: 0 10px 25px rgba(72, 187, 120, 0.3);
        }

        .dropdown-container {
            margin-top: 15px;
        }

        .answer-dropdown {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .answer-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .answer-dropdown option {
            padding: 8px;
        }

        .course-options {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .course-option {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .course-option:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }

        .course-option h4 {
            color: #667eea;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .course-option p {
            color: #4a5568;
            font-size: 14px;
            line-height: 1.5;
            margin: 0;
        }

        .compact-questions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .compact-question {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            background: #f9fafb;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .compact-question .question-number {
            font-weight: 600;
            color: #667eea;
            font-size: 16px;
            min-width: 25px;
        }

        .compact-question .question-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.5;
            color: #2d3748;
        }

        .compact-dropdown {
            min-width: 200px;
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 13px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .compact-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .reading-text {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            line-height: 1.7;
        }

        .reading-text h3 {
            color: #2d3748;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 15px;
        }

        .reading-text p {
            margin-bottom: 18px;
            color: #2d3748;
            font-size: 15px;
            text-align: justify;
        }

        .reading-text p:last-child {
            margin-bottom: 0;
        }

        .question-text {
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .sentence-options {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .sentence-option {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px 15px;
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.5;
            color: #2d3748;
        }

        .sentence-option strong {
            color: #667eea;
            margin-right: 8px;
        }

        .compact-answers {
            margin-top: 25px;
        }

        .answer-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 15px;
        }

        .answer-number {
            font-weight: 600;
            color: #667eea;
            min-width: 35px;
            font-size: 16px;
        }

        .letter-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .letter-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #4a5568;
            transition: color 0.3s ease;
        }

        .letter-option input[type="radio"] {
            margin-right: 5px;
            transform: scale(1.1);
        }

        .letter-option:hover {
            color: #667eea;
        }

        .compact-question-row {
            display: flex;
            align-items: center;
            gap: 20px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
        }

        .compact-question-row .question-number {
            font-weight: 600;
            color: #667eea;
            min-width: 90px;
            font-size: 16px;
        }

        .horizontal-options {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .horizontal-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            color: #4a5568;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid transparent;
        }

        .horizontal-option:hover {
            background: #f7fafc;
            border-color: #e2e8f0;
        }

        .horizontal-option input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.1);
        }

        .horizontal-option.selected {
            background: #f0f4ff;
            border-color: #667eea;
            color: #667eea;
        }

        .gap-input {
            display: inline-block;
            width: 100px;
            padding: 6px 10px;
            border: 2px solid #667eea;
            border-radius: 4px;
            font-size: 15px;
            font-weight: 500;
            text-align: center;
            background: white;
            color: #2d3748;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .gap-input:focus {
            outline: none;
            border-color: #4c51bf;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: #f0f4ff;
        }

        .gap-input::placeholder {
            color: #a0aec0;
            font-weight: 300;
        }

        .answer-summary {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
            background: #f7fafc;
            border-radius: 8px;
            padding: 20px;
        }

        .answer-display {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 10px 15px;
            margin-bottom: 8px;
        }

        .answer-display .answer-number {
            font-weight: 600;
            color: #667eea;
            min-width: 35px;
            font-size: 16px;
        }

        .answer-value {
            color: #2d3748;
            font-weight: 500;
            font-size: 15px;
            min-height: 20px;
            padding: 2px 8px;
            background: #f7fafc;
            border-radius: 4px;
            min-width: 60px;
            text-align: center;
        }

        .answer-value.filled {
            background: #f0f4ff;
            border: 1px solid #667eea;
            color: #667eea;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .test-info {
                text-align: center;
            }

            .nav-parts {
                justify-content: center;
            }

            .nav-part {
                font-size: 14px;
                padding: 8px 15px;
            }

            .container {
                padding: 20px 15px;
            }

            .test-section {
                padding: 20px;
            }

            .compact-question {
                flex-direction: column;
                gap: 10px;
            }

            .compact-question .question-text {
                margin-bottom: 10px;
            }

            .compact-dropdown {
                align-self: flex-start;
                min-width: 100px;
            }

            .answer-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .letter-options {
                gap: 10px;
            }

            .compact-question-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .compact-question-row .question-number {
                min-width: auto;
            }

            .horizontal-options {
                gap: 15px;
                width: 100%;
            }

            .horizontal-option {
                flex: 1;
                justify-content: center;
                min-width: 0;
            }

            .gap-input {
                width: 80px;
                font-size: 14px;
            }

            .answer-display {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .answer-display .answer-number {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">Speakers' Corner</div>
            <div class="test-info">
                <h2>B1 Reading Test</h2>
                <p>Cambridge English: Preliminary (PET)</p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-parts">
                <div class="nav-part active" data-part="1">Part 1</div>
                <div class="nav-part" data-part="2">Part 2</div>
                <div class="nav-part" data-part="3">Part 3</div>
                <div class="nav-part" data-part="4">Part 4</div>
                <div class="nav-part" data-part="5">Part 5</div>
                <div class="nav-part" data-part="6">Part 6</div>
            </div>
        </div>

        <!-- Part 1: Multiple Choice (Real-world notices) -->
        <div class="test-section" id="part1">
            <div class="part-header">
                <h2 class="part-title">Part 1</h2>
                <p class="part-instructions">
                    <strong>Look at the text in each question.</strong><br>
                    What does it say?<br>
                    Mark the correct letter A, B or C.
                </p>
            </div>

            <div class="question">
                <div class="question-number">Question 1</div>
                <div class="text-content">
                    <strong>MUSEUM CAFÉ</strong><br>
                    Hot meals served until 3.30 pm<br>
                    Sandwiches and snacks available all day
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="A">
                        <span>A) You can get a hot meal at any time.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="B">
                        <span>B) Hot food is not served after 3.30 pm.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="C">
                        <span>C) Cold food is only available until 3.30 pm.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 2</div>
                <div class="text-content">
                    <strong>TO: All Students</strong><br>
                    <strong>FROM: Library Staff</strong><br>
                    Please note that the library will be closed for maintenance this weekend. Normal opening hours will resume on Monday.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="A">
                        <span>A) The library is changing its opening hours.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="B">
                        <span>B) Students cannot use the library this weekend.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="C">
                        <span>C) The library will open later on Monday.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 3</div>
                <div class="text-content">
                    <strong>SWIMMING POOL</strong><br>
                    Children under 12 must be accompanied by an adult at all times.<br>
                    Life jackets available at reception.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q3" value="A">
                        <span>A) Adults must swim with children under 12.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="B">
                        <span>B) Children under 12 can swim alone if they wear life jackets.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="C">
                        <span>C) Life jackets are required for all swimmers.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 4</div>
                <div class="text-content">
                    <strong>Emma,</strong><br>
                    Can't make it to the cinema tonight - have to work late. Why don't we go tomorrow instead? The 7 pm showing would be perfect.<br>
                    <strong>Jake</strong>
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q4" value="A">
                        <span>A) Jake suggests a different time to meet.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="B">
                        <span>B) Jake will be late for the cinema tonight.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="C">
                        <span>C) Jake wants to change the film they will see.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 5</div>
                <div class="text-content">
                    <strong>SALE!</strong><br>
                    All winter clothes 50% off<br>
                    This weekend only<br>
                    *Not valid with other offers
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5" value="A">
                        <span>A) You can use this offer with other discounts.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="B">
                        <span>B) Winter clothes are half price for two days.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="C">
                        <span>C) The sale continues into next week.</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Part 2: Matching -->
        <div class="test-section" id="part2" style="display: none;">
            <div class="part-header">
                <h2 class="part-title">Part 2</h2>
                <p class="part-instructions">
                    <strong>The people below will soon move to New York and they want to do a course at the Brooklyn Activity Centre.</strong><br>
                    Read the descriptions of eight activities at this Centre. Decide which activity would be the most suitable for each person.<br>
                    There are THREE activities that you DO NOT need to use.<br>
                    For questions 6-10, mark the correct letter A-H.
                </p>
            </div>

            <div class="compact-questions">
                <div class="compact-question">
                    <span class="question-number">6.</span>
                    <span class="question-text"><strong>Kezia</strong> is from London in the UK. She loves her city because it's exciting and interesting. In her free time, she likes going to restaurants. She enjoys trying products and dishes from different countries.</span>
                    <select name="q6" class="compact-dropdown">
                        <option value="">Select...</option>
                        <option value="A">A - Dance</option>
                        <option value="B">B - Film School</option>
                        <option value="C">C - Hill Walkers</option>
                        <option value="D">D - Dog Training</option>
                        <option value="E">E - Ancient China</option>
                        <option value="F">F - World Music</option>
                        <option value="G">G - Cooking</option>
                        <option value="H">H - Painting Course</option>
                    </select>
                </div>

                <div class="compact-question">
                    <span class="question-number">7.</span>
                    <span class="question-text"><strong>Floyd</strong> is from Kingston, the capital of Jamaica. He lives near the Bob Marley Museum in the city centre. In his free time, Floyd likes to visit the zoo and gardens with his friends and enjoys walking to the waterfall in the Blue Mountains of Jamaica.</span>
                    <select name="q7" class="compact-dropdown">
                        <option value="">Select...</option>
                        <option value="A">A - Dance</option>
                        <option value="B">B - Film School</option>
                        <option value="C">C - Hill Walkers</option>
                        <option value="D">D - Dog Training</option>
                        <option value="E">E - Ancient China</option>
                        <option value="F">F - World Music</option>
                        <option value="G">G - Cooking</option>
                        <option value="H">H - Painting Course</option>
                    </select>
                </div>

                <div class="compact-question">
                    <span class="question-number">8.</span>
                    <span class="question-text"><strong>Badou</strong> is from Paris, France. During the week, he's a student at the Sorbonne. At the weekends, he works in a bookshop in the city. Badou loves visiting museums, painting pictures and shopping when he has time.</span>
                    <select name="q8" class="compact-dropdown">
                        <option value="">Select...</option>
                        <option value="A">A - Dance</option>
                        <option value="B">B - Film School</option>
                        <option value="C">C - Hill Walkers</option>
                        <option value="D">D - Dog Training</option>
                        <option value="E">E - Ancient China</option>
                        <option value="F">F - World Music</option>
                        <option value="G">G - Cooking</option>
                        <option value="H">H - Painting Course</option>
                    </select>
                </div>

                <div class="compact-question">
                    <span class="question-number">9.</span>
                    <span class="question-text"><strong>Jennifer</strong> is from San Francisco in the United States. She owns a small shop that sells women's clothes, bags and shoes. She works a lot, but in her free time, she loves music, meeting friends, and going to nightclubs.</span>
                    <select name="q9" class="compact-dropdown">
                        <option value="">Select...</option>
                        <option value="A">A - Dance</option>
                        <option value="B">B - Film School</option>
                        <option value="C">C - Hill Walkers</option>
                        <option value="D">D - Dog Training</option>
                        <option value="E">E - Ancient China</option>
                        <option value="F">F - World Music</option>
                        <option value="G">G - Cooking</option>
                        <option value="H">H - Painting Course</option>
                    </select>
                </div>

                <div class="compact-question">
                    <span class="question-number">10.</span>
                    <span class="question-text"><strong>Carla</strong> is from Sydney, Australia. She works in the National History Museum. She likes her job but wants to travel more in the future. She speaks Spanish quite well, and she is learning Mandarin. She wants to live in Beijing for one year as an English teacher.</span>
                    <select name="q10" class="compact-dropdown">
                        <option value="">Select...</option>
                        <option value="A">A - Dance</option>
                        <option value="B">B - Film School</option>
                        <option value="C">C - Hill Walkers</option>
                        <option value="D">D - Dog Training</option>
                        <option value="E">E - Ancient China</option>
                        <option value="F">F - World Music</option>
                        <option value="G">G - Cooking</option>
                        <option value="H">H - Painting Course</option>
                    </select>
                </div>
            </div>

            <div class="course-options">
                <h3 style="margin: 30px 0 20px 0; color: #2d3748; font-size: 20px;">Brooklyn Activity Centre - Activities Available:</h3>
                <p style="color: #4a5568; margin-bottom: 25px; font-style: italic;">Welcome to Brooklyn Activity Centre. Here is a list of activities you can do at our centre. Let our membership team know which class you would like to register for!</p>
                
                <div class="course-option">
                    <h4>A - Dance</h4>
                    <p>In this class, you will learn four different types of dancing: salsa, tango, Zumba and hip-hop. Join our excellent dance teachers, Antonio and Stella, who will show you special techniques over a ten-week course. So, if you love music and are ready to have fun, join our classes on Monday and Wednesday!</p>
                </div>

                <div class="course-option">
                    <h4>B - Film School</h4>
                    <p>This year, Jason Williams is leading our film school course. Jason is a young director and teacher. He will show you how to use a video camera, manage lights, and act in a movie. The group will make a small film at the end of the course. This is an exciting course, so sign up now!</p>
                </div>

                <div class="course-option">
                    <h4>C - Hill Walkers</h4>
                    <p>The Hill-walking Club opens on September 1st. If you love walking in the mountains, this club is for you! The first walk is to Crystal Lake on Mount Marcy. Hill walkers should wear good walking shoes and bring lots of water, a raincoat and food in a bag. If you're ready to get exercise, join this group!</p>
                </div>

                <div class="course-option">
                    <h4>D - Dog Training</h4>
                    <p>This course is for you and your dog! Learn to train your dog how to sit, jump and run. Dog-training expert, Imelda Ruff, will show you techniques to train your dog for local and national shows. If your dog is successful, you can enter the big national show at the end of the year. So come to this course if you and your best doggy friend want some fun together!</p>
                </div>

                <div class="course-option">
                    <h4>E - Ancient China</h4>
                    <p>In this unusual course, we discover China's ancient art and culture. Hyung Wei Chang will teach you about the best ancient Chinese artists, the Ming dynasty, and you will also learn about ancient Chinese buildings. On the last day of the course, the group will have dinner at The Golden Elephant on Green Street.</p>
                </div>

                <div class="course-option">
                    <h4>F - World Music</h4>
                    <p>In this amazing course, you will listen to music from Africa, Australia, India and many other countries worldwide. You will also have the chance to try unusual instruments like the triangle. In this course, you will meet famous world musicians and go to concerts to listen to their music. This is the most expensive course, but it's excellent.</p>
                </div>

                <div class="course-option">
                    <h4>G - Cooking</h4>
                    <p>Do you love to eat? Then, maybe you should learn how to cook! Pierre Chevalier teaches you how to prepare French food in a simple way. Pierre will also teach you about Italian, Greek and Turkish food. Everyone must bring their own ingredients, but you are allowed to eat everything you make!</p>
                </div>

                <div class="course-option">
                    <h4>H - Painting Course</h4>
                    <p>Nikolai Ramonov will meet all new students at Studio 4 to teach art. The course includes art history and painting. You will learn how to use oils and watercolours. You will also learn how to paint an object, a person and a landscape. Nicolai is a well-known artist in his town of St. Petersburg.</p>
                </div>
            </div>
        </div>

        <div class="test-section" id="part3" style="display: none;">
            <div class="part-header">
                <h2 class="part-title">Part 3</h2>
                <p class="part-instructions">
                    <strong>Look at the text below about a trip to Greece.</strong><br>
                    Read the text and questions below.<br>
                    For each question, mark the correct letter A, B, C or D.
                </p>
            </div>

            <div class="reading-text">
                <h3>My first trip to Greece, by Steve Diamond</h3>
                <p>Many years ago, I went to Greece on a short work experience program with my friend Jamie. We had both just finished university and we didn't really know what to do with our lives. So, we jumped on a plane to the island of Crete, Greece's largest island which rests in the Aegean Sea.</p>
                
                <p>When we arrived in Heraklion, the capital of Crete, we were welcomed by Irena and Jacob Lambraiki, the owners of the school where we had been hired to teach English classes to Greek children. They showed us to our flat and then, they brought us to a good Greek restaurant. I ate 'spanakopita' which is a spinach and cheese pie, and we also had a Greek salad. Most of the dishes were made with natural ingredients and they were very tasty.</p>
                
                <p>The next day, we started teaching our first classes to Greek students. My students were between 11 and 15 years of age. I was surprised by how funny and smart the kids were. During the course, I tried to teach them English while they taught me all about Greek culture. I learned about Greek food, music, landscape and I even learned some Greek words. At the weekends, we visited ancient sights and swam in the perfect blue sea. I was amazed by the clean, white houses and lovely beaches. By the end of the work experience, I had fallen in love with Crete but to my disappointment, I had to return home for another job. Greece will always be very special in my memory.</p>
            </div>

            <div class="question">
                <div class="question-number">Question 11</div>
                <div class="question-text">What is the writer trying to do in this text?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q11" value="A">
                        <span>A) Give advice about places to visit in Greece</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q11" value="B">
                        <span>B) Tell a story about his trip abroad</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q11" value="C">
                        <span>C) Explain how to get a job teaching English</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q11" value="D">
                        <span>D) Present the good and bad points of a work abroad experience</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 12</div>
                <div class="question-text">What does the writer say about Greek food?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q12" value="A">
                        <span>A) He didn't eat enough food to have an opinion about it.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q12" value="B">
                        <span>B) He learned how to make Spanakopita and Moussaka.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q12" value="C">
                        <span>C) Moussaka and Spanakopita are the best dishes in Greece.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q12" value="D">
                        <span>D) Greek food is natural and delicious.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 13</div>
                <div class="question-text">What surprised the writer about the kids at the school?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q13" value="A">
                        <span>A) Their ability to speak English.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q13" value="B">
                        <span>B) Their knowledge of Greek.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q13" value="C">
                        <span>C) Their kindness to help him.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q13" value="D">
                        <span>D) Their intelligence and sense of humour.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 14</div>
                <div class="question-text">How did the writer feel about leaving Greece?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q14" value="A">
                        <span>A) He had mixed feelings.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q14" value="B">
                        <span>B) He was happy to leave Greece.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q14" value="C">
                        <span>C) He was angry about leaving Greece.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q14" value="D">
                        <span>D) He felt sad about leaving Greece.</span>
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 15</div>
                <div class="question-text">Which message do you think Steve sent to his mother from Greece?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q15" value="A">
                        <span>A) Hi Mom, It's been fun learning Greek but I'm ready to come home. See you soon! Steve</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q15" value="B">
                        <span>B) Mum, even though it was difficult here because of the students, I don't want to come home yet. What should I do? Steve</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q15" value="C">
                        <span>C) Hey Mum, I've had a lovely time in Crete. Let's bring the whole family here next year! See you soon, Steve</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q15" value="D">
                        <span>D) Hello Mom, I've decided to stay in Greece for another year. I'll let you know what happens, Steve</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="test-section" id="part4" style="display: none;">
            <div class="part-header">
                <h2 class="part-title">Part 4</h2>
                <p class="part-instructions">
                    <strong>Five sentences have been removed from the text below.</strong><br>
                    For each question, choose the correct answer.<br>
                    There are three extra sentences which you do not need to use.
                </p>
            </div>

            <div class="reading-text">
                <p>Jane had always lived in the city, amidst the hustle and bustle of tall skyscrapers and busy streets. Growing up in such a fast-paced environment had its benefits. <strong>16 ___</strong>. However, she was increasingly tired of everything around her: the noise, the traffic, the stress.</p>
                
                <p>Everything changed when she visited her grandparents in the countryside one summer. Walking through the vast green fields, listening to the gentle chirping of the birds, and feeling the cool breeze on her face was a refreshing experience. <strong>17 ___</strong>.</p>
                
                <p>By the end of her stay, Jane found herself contemplating a life outside the city. She felt an unusual connection to nature and started exploring the idea of permanently moving to a rural area. Six months later, Jane made up her mind and decided to leave her city apartment. <strong>18 ___</strong>. Her friends thought she was making a hasty decision, but she felt it was the right choice for her.</p>
                
                <p>Now, living in the countryside, she has her own garden and even a few farm animals. <strong>19 ___</strong>. There's a sense of community she had never experienced before. While she occasionally misses the convenience of city life, the natural beauty and calmness of her new surroundings more than make up for it. <strong>20 ___</strong>. She often jokes that the only traffic she encounters now are the sheep crossing the road.</p>
            </div>

            <div class="sentence-options">
                <h3 style="margin: 30px 0 20px 0; color: #2d3748; font-size: 18px;">Sentence Options:</h3>
                
                <div class="sentence-option">
                    <strong>A)</strong> The peace and quiet were in complete contrast to the noisy city life she was accustomed to.
                </div>
                <div class="sentence-option">
                    <strong>B)</strong> She secured a job in a local school and rented a small cottage by the river.
                </div>
                <div class="sentence-option">
                    <strong>C)</strong> She spends her mornings tending to her plants and feeding the chickens.
                </div>
                <div class="sentence-option">
                    <strong>D)</strong> Many nights, she found herself looking at the starlit sky from her bedroom window.
                </div>
                <div class="sentence-option">
                    <strong>E)</strong> There were always things to do, places to visit.
                </div>
                <div class="sentence-option">
                    <strong>F)</strong> But the constant noise and chaos often left her feeling exhausted.
                </div>
                <div class="sentence-option">
                    <strong>G)</strong> She loves visiting the local farmer's market on weekends.
                </div>
                <div class="sentence-option">
                    <strong>H)</strong> The people living there seemed content and relaxed.
                </div>
            </div>

            <div class="compact-answers">
                <h3 style="margin: 30px 0 20px 0; color: #2d3748; font-size: 18px;">Choose your answers:</h3>
                
                <div class="answer-grid">
                    <div class="answer-row">
                        <span class="answer-number">16.</span>
                        <div class="letter-options">
                            <label class="letter-option"><input type="radio" name="q16" value="A"> A</label>
                            <label class="letter-option"><input type="radio" name="q16" value="B"> B</label>
                            <label class="letter-option"><input type="radio" name="q16" value="C"> C</label>
                            <label class="letter-option"><input type="radio" name="q16" value="D"> D</label>
                            <label class="letter-option"><input type="radio" name="q16" value="E"> E</label>
                            <label class="letter-option"><input type="radio" name="q16" value="F"> F</label>
                            <label class="letter-option"><input type="radio" name="q16" value="G"> G</label>
                            <label class="letter-option"><input type="radio" name="q16" value="H"> H</label>
                        </div>
                    </div>

                    <div class="answer-row">
                        <span class="answer-number">17.</span>
                        <div class="letter-options">
                            <label class="letter-option"><input type="radio" name="q17" value="A"> A</label>
                            <label class="letter-option"><input type="radio" name="q17" value="B"> B</label>
                            <label class="letter-option"><input type="radio" name="q17" value="C"> C</label>
                            <label class="letter-option"><input type="radio" name="q17" value="D"> D</label>
                            <label class="letter-option"><input type="radio" name="q17" value="E"> E</label>
                            <label class="letter-option"><input type="radio" name="q17" value="F"> F</label>
                            <label class="letter-option"><input type="radio" name="q17" value="G"> G</label>
                            <label class="letter-option"><input type="radio" name="q17" value="H"> H</label>
                        </div>
                    </div>

                    <div class="answer-row">
                        <span class="answer-number">18.</span>
                        <div class="letter-options">
                            <label class="letter-option"><input type="radio" name="q18" value="A"> A</label>
                            <label class="letter-option"><input type="radio" name="q18" value="B"> B</label>
                            <label class="letter-option"><input type="radio" name="q18" value="C"> C</label>
                            <label class="letter-option"><input type="radio" name="q18" value="D"> D</label>
                            <label class="letter-option"><input type="radio" name="q18" value="E"> E</label>
                            <label class="letter-option"><input type="radio" name="q18" value="F"> F</label>
                            <label class="letter-option"><input type="radio" name="q18" value="G"> G</label>
                            <label class="letter-option"><input type="radio" name="q18" value="H"> H</label>
                        </div>
                    </div>

                    <div class="answer-row">
                        <span class="answer-number">19.</span>
                        <div class="letter-options">
                            <label class="letter-option"><input type="radio" name="q19" value="A"> A</label>
                            <label class="letter-option"><input type="radio" name="q19" value="B"> B</label>
                            <label class="letter-option"><input type="radio" name="q19" value="C"> C</label>
                            <label class="letter-option"><input type="radio" name="q19" value="D"> D</label>
                            <label class="letter-option"><input type="radio" name="q19" value="E"> E</label>
                            <label class="letter-option"><input type="radio" name="q19" value="F"> F</label>
                            <label class="letter-option"><input type="radio" name="q19" value="G"> G</label>
                            <label class="letter-option"><input type="radio" name="q19" value="H"> H</label>
                        </div>
                    </div>

                    <div class="answer-row">
                        <span class="answer-number">20.</span>
                        <div class="letter-options">
                            <label class="letter-option"><input type="radio" name="q20" value="A"> A</label>
                            <label class="letter-option"><input type="radio" name="q20" value="B"> B</label>
                            <label class="letter-option"><input type="radio" name="q20" value="C"> C</label>
                            <label class="letter-option"><input type="radio" name="q20" value="D"> D</label>
                            <label class="letter-option"><input type="radio" name="q20" value="E"> E</label>
                            <label class="letter-option"><input type="radio" name="q20" value="F"> F</label>
                            <label class="letter-option"><input type="radio" name="q20" value="G"> G</label>
                            <label class="letter-option"><input type="radio" name="q20" value="H"> H</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section" id="part5" style="display: none;">
            <div class="part-header">
                <h2 class="part-title">Part 5</h2>
                <p class="part-instructions">
                    <strong>Read the text below and choose the correct word for each space.</strong><br>
                    For each question, mark the correct letter A, B, C or D.
                </p>
            </div>

            <div class="reading-text">
                <h3>The Maple Tree</h3>
                <p>The maple tree is a commonly recognized tree, especially known for its vibrant autumn colors. Found in cool, temperate <strong>21 ___</strong>, this tree is popular in many parts of North America. During autumn, its leaves change from green to brilliant shades of orange, red, and yellow, and often become a tourist <strong>22 ___</strong> in regions where they flourish.</p>
                
                <p>Many might simply see the maple tree as a decorative plant, but it has multiple <strong>23 ___</strong> that go beyond its visual appeal. Historically, its wood has been used for crafting furniture, musical instruments, and even for making syrup. Nowadays, if you <strong>24 ___</strong> in your kitchen, you might find maple syrup, a sweet liquid <strong>25 ___</strong> from the sap of the maple tree, which is a popular topping for pancakes and waffles.</p>
                
                <p>The production of maple syrup is quite fascinating. The sap is collected during the early spring when temperatures start to <strong>26 ___</strong> after the winter, and it's later boiled down to produce the syrup. This sweet treat has become a staple in many breakfast dishes around the world.</p>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 21</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q21" value="A">
                        <span>A) climates</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q21" value="B">
                        <span>B) weathers</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q21" value="C">
                        <span>C) surroundings</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q21" value="D">
                        <span>D) circumstances</span>
                    </label>
                </div>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 22</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q22" value="A">
                        <span>A) distraction</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q22" value="B">
                        <span>B) attraction</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q22" value="C">
                        <span>C) deviation</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q22" value="D">
                        <span>D) diversion</span>
                    </label>
                </div>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 23</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q23" value="A">
                        <span>A) jobs</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q23" value="B">
                        <span>B) uses</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q23" value="C">
                        <span>C) tasks</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q23" value="D">
                        <span>D) duties</span>
                    </label>
                </div>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 24</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q24" value="A">
                        <span>A) glance</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q24" value="B">
                        <span>B) see</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q24" value="C">
                        <span>C) watch</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q24" value="D">
                        <span>D) look</span>
                    </label>
                </div>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 25</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q25" value="A">
                        <span>A) shaped</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q25" value="B">
                        <span>B) made</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q25" value="C">
                        <span>C) built</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q25" value="D">
                        <span>D) formed</span>
                    </label>
                </div>
            </div>

            <div class="question compact-question-row">
                <div class="question-number">Question 26</div>
                <div class="horizontal-options">
                    <label class="horizontal-option">
                        <input type="radio" name="q26" value="A">
                        <span>A) grow</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q26" value="B">
                        <span>B) lower</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q26" value="C">
                        <span>C) drop</span>
                    </label>
                    <label class="horizontal-option">
                        <input type="radio" name="q26" value="D">
                        <span>D) increase</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="test-section" id="part6" style="display: none;">
            <div class="part-header">
                <h2 class="part-title">Part 6</h2>
                <p class="part-instructions">
                    <strong>For each question, write the correct answer.</strong><br>
                    Write ONE word for each gap.
                </p>
            </div>

            <div class="reading-text">
                <p>Australia's wildlife is quite different to animals in the rest of the world <strong>27 <input type="text" name="q27" class="gap-input" placeholder="____"></strong> Australia is far and isolated from many other countries. Some of these animals live in protected national parks, <strong>28 <input type="text" name="q28" class="gap-input" placeholder="____"></strong> the platypus, the kangaroo and the koala. The platypus looks like a duck but has a tail and soft brown fur. It spends most of its time in rivers, searching for food. The baby platypus grows in an egg, but it drinks milk from the mother as it grows.</p>
                
                <p><strong>29 <input type="text" name="q29" class="gap-input" placeholder="____"></strong> are four types of kangaroos in Australia. The Eastern Grey and Red kangaroos are larger, approximately two meters in height. However, the Red kangaroo is the heaviest, with around 90 kilos average weight. This kangaroo lives in a very dry region in New South Wales. The Eastern Grey is found in Queensland and Victoria.</p>
                
                <p><strong>30 <input type="text" name="q30" class="gap-input" placeholder="____"></strong> smallest and lightest kangaroo is the Antilopine which weighs about 38 kilos. We find this animal in Northern Australia, where it enjoys grassy plains and forests. <strong>31 <input type="text" name="q31" class="gap-input" placeholder="____"></strong> is about 1 meter in height. The Western Grey Kangaroo, a little larger at 1.2 meters, is found in the Darling River Basin as it prefers the forest and coast. The Western Grey kangaroo <strong>32 <input type="text" name="q32" class="gap-input" placeholder="____"></strong> 54 kilos in weight.</p>
            </div>

            <div class="answer-summary">
                <h3 style="margin: 30px 0 20px 0; color: #2d3748; font-size: 18px;">Your Answers:</h3>
                <div class="answer-grid">
                    <div class="answer-display">
                        <span class="answer-number">27.</span>
                        <span class="answer-value" id="answer-27">_____</span>
                    </div>
                    <div class="answer-display">
                        <span class="answer-number">28.</span>
                        <span class="answer-value" id="answer-28">_____</span>
                    </div>
                    <div class="answer-display">
                        <span class="answer-number">29.</span>
                        <span class="answer-value" id="answer-29">_____</span>
                    </div>
                    <div class="answer-display">
                        <span class="answer-number">30.</span>
                        <span class="answer-value" id="answer-30">_____</span>
                    </div>
                    <div class="answer-display">
                        <span class="answer-number">31.</span>
                        <span class="answer-value" id="answer-31">_____</span>
                    </div>
                    <div class="answer-display">
                        <span class="answer-number">32.</span>
                        <span class="answer-value" id="answer-32">_____</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="submit-section">
            <button type="button" class="submit-btn next-btn" onclick="nextPart()" id="nextPartBtn">Next Part</button>
            <button type="button" class="submit-btn" onclick="submitFinalTest()" id="submitTestBtn" style="display: none; background: #e53e3e;">Submit Test</button>
        </div>
    </div>

    <script>
        let currentPart = 1;
        const answers = {};

        // Navigation between parts
        document.querySelectorAll('.nav-part').forEach(part => {
            part.addEventListener('click', function() {
                const partNum = parseInt(this.dataset.part);
                showPart(partNum);
            });
        });

        function showPart(partNum) {
            // Hide all parts
            document.querySelectorAll('.test-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected part
            document.getElementById(`part${partNum}`).style.display = 'block';
            
            // Update navigation
            document.querySelectorAll('.nav-part').forEach(nav => {
                nav.classList.remove('active');
            });
            document.querySelector(`[data-part="${partNum}"]`).classList.add('active');
            
            currentPart = partNum;
            
            // Show/hide appropriate buttons
            if (partNum === 6) {
                document.getElementById('nextPartBtn').style.display = 'none';
                document.getElementById('submitTestBtn').style.display = 'inline-block';
            } else {
                document.getElementById('nextPartBtn').style.display = 'inline-block';
                document.getElementById('submitTestBtn').style.display = 'none';
            }
            
            // Scroll to top of the page
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Handle option selection
        document.addEventListener('change', function(e) {
            if (e.target.type === 'radio') {
                const questionName = e.target.name;
                const value = e.target.value;
                
                // Store answer
                answers[questionName] = value;
                
                // Update visual selection for regular options
                const questionDiv = e.target.closest('.question');
                if (questionDiv) {
                    questionDiv.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    const optionElement = e.target.closest('.option');
                    if (optionElement) {
                        optionElement.classList.add('selected');
                    }
                }
                
                // Update visual selection for horizontal options (Part 5)
                const horizontalOption = e.target.closest('.horizontal-option');
                if (horizontalOption) {
                    const questionRow = horizontalOption.closest('.compact-question-row');
                    questionRow.querySelectorAll('.horizontal-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    horizontalOption.classList.add('selected');
                }
                
                // Update visual selection for answer rows (Part 4)
                const answerRow = e.target.closest('.answer-row');
                if (answerRow) {
                    answerRow.style.borderColor = '#667eea';
                    answerRow.style.background = '#f0f4ff';
                    
                    // Reset other rows for the same question
                    const allRows = document.querySelectorAll('.answer-row');
                    allRows.forEach(row => {
                        if (row !== answerRow && row.querySelector(`input[name="${questionName}"]`)) {
                            // This is for a different question, don't reset
                        }
                    });
                }
            } else if (e.target.classList.contains('answer-dropdown') || e.target.classList.contains('compact-dropdown')) {
                // Handle dropdown selections
                const questionName = e.target.name;
                const value = e.target.value;
                
                // Store answer
                answers[questionName] = value;
                
                // Update visual selection
                if (value) {
                    e.target.style.borderColor = '#667eea';
                    e.target.style.background = '#f0f4ff';
                } else {
                    e.target.style.borderColor = '#e2e8f0';
                    e.target.style.background = 'white';
                }
            }
        });

        // Handle text input for Part 6
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('gap-input')) {
                const questionName = e.target.name;
                const value = e.target.value.trim();
                
                // Store answer
                answers[questionName] = value;
                
                // Update answer summary display
                const questionNumber = questionName.replace('q', '');
                const answerDisplay = document.getElementById(`answer-${questionNumber}`);
                if (answerDisplay) {
                    answerDisplay.textContent = value || '_____';
                    if (value) {
                        answerDisplay.classList.add('filled');
                    } else {
                        answerDisplay.classList.remove('filled');
                    }
                }
            }
        });

        function submitTest() {
            const currentAnswers = {};
            const currentPartElement = document.getElementById(`part${currentPart}`);
            
            // Get answers for current part
            currentPartElement.querySelectorAll('input[type="radio"]:checked').forEach(input => {
                currentAnswers[input.name] = input.value;
            });
            
            console.log(`Part ${currentPart} answers:`, currentAnswers);
            
            // Here you would typically send answers to a server
            alert(`Part ${currentPart} submitted! Answers: ${JSON.stringify(currentAnswers)}`);
        }

        function nextPart() {
            if (currentPart < 6) {
                showPart(currentPart + 1);
            } else {
                alert('You have completed all parts of the reading test!');
            }
        }

        function submitFinalTest() {
            // Collect all answers
            const allAnswers = {};
            
            // Get all radio button answers
            document.querySelectorAll('input[type="radio"]:checked').forEach(input => {
                allAnswers[input.name] = input.value;
            });
            
            // Get all dropdown answers
            document.querySelectorAll('select').forEach(select => {
                if (select.value) {
                    allAnswers[select.name] = select.value;
                }
            });
            
            // Get all text input answers
            document.querySelectorAll('.gap-input').forEach(input => {
                if (input.value.trim()) {
                    allAnswers[input.name] = input.value.trim();
                }
            });
            
            // Calculate score
            const correctAnswers = {
                q1: 'B', q2: 'B', q3: 'A', q4: 'A', q5: 'B',
                q6: 'G', q7: 'C', q8: 'H', q9: 'A', q10: 'E',
                q11: 'B', q12: 'D', q13: 'D', q14: 'D', q15: 'C',
                q16: 'E', q17: 'A', q18: 'B', q19: 'C', q20: 'D',
                q21: 'A', q22: 'B', q23: 'B', q24: 'D', q25: 'B', q26: 'D',
                q27: 'because', q28: 'like', q29: 'There', q30: 'The', q31: 'It', q32: 'weighs'
            };
            
            let score = 0;
            let totalQuestions = 32;
            
            for (let question in correctAnswers) {
                if (allAnswers[question] && 
                    allAnswers[question].toLowerCase() === correctAnswers[question].toLowerCase()) {
                    score++;
                }
            }
            
            // Store results
            const studentName = localStorage.getItem('studentName') || 'Unknown';
            const studentEmail = localStorage.getItem('studentEmail') || 'unknown@email.com';
            
            // Calculate part scores
            const partScores = this.calculatePartScores ? this.calculatePartScores(allAnswers, correctAnswers) : {};
            
            const results = {
                testLevel: 'B1',
                studentName: studentName,
                studentEmail: studentEmail,
                score: score,
                totalQuestions: totalQuestions,
                percentage: Math.round((score / totalQuestions) * 100),
                answers: allAnswers,
                correctAnswers: correctAnswers,
                partScores: partScores,
                testDate: new Date().toLocaleDateString(),
                testTime: new Date().toLocaleTimeString()
            };
            
            // Store in localStorage for current session (backward compatibility)
            localStorage.setItem('testResults', JSON.stringify(results));
            
            // Always add basic identifiers to results
            const timestamp = Date.now();
            const uniqueId = timestamp.toString(36) + Math.random().toString(36).substr(2);
            results.id = uniqueId;
            results.timestamp = new Date().toISOString();
            
            // Store in persistent storage (preferred method)
            let savedId = uniqueId;
            let saveSuccess = false;
            
            try {
                if (window.testStorage && typeof window.testStorage.addResult === 'function') {
                    const savedResult = window.testStorage.addResult(results);
                    savedId = savedResult.id;
                    saveSuccess = true;
                    console.log('✅ Test result saved to persistent storage:', savedResult.id);
                } else {
                    console.log('⚠️ Persistent storage not available, using localStorage fallback');
                }
            } catch (error) {
                console.error('❌ Error with persistent storage:', error);
            }
            
            // Always save to localStorage as backup (regardless of persistent storage)
            try {
                const uniqueKey = `testResult_${timestamp}_${studentName.replace(/\s+/g, '_')}`;
                localStorage.setItem(uniqueKey, JSON.stringify(results));
                
                const allStoredResults = JSON.parse(localStorage.getItem('allTestResults') || '[]');
                allStoredResults.unshift(results);
                localStorage.setItem('allTestResults', JSON.stringify(allStoredResults));
                
                console.log('✅ Test result saved to localStorage backup:', uniqueId);
                saveSuccess = true;
            } catch (localError) {
                console.error('❌ Error saving to localStorage:', localError);
                
                // Last resort: emergency save
                try {
                    localStorage.setItem('testResults_emergency_' + timestamp, JSON.stringify(results));
                    console.log('✅ Emergency save completed:', uniqueId);
                    saveSuccess = true;
                } catch (emergencyError) {
                    console.error('❌ All save methods failed:', emergencyError);
                    alert('Critical Error: Unable to save test results. Please screenshot your answers and contact support.');
                    return; // Don't redirect if we can't save anywhere
                }
            }
            
            if (!saveSuccess) {
                alert('Error: Test results could not be saved. Please try again.');
                return;
            }
            
            console.log('Test submission completed. ID:', savedId);
            console.log('Results data:', results);
            
            window.location.href = 'results.html';
        }

        // Initialize
        showPart(1);
        
        // Debug: Check if persistent storage is available
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (window.testStorage) {
                    console.log('✅ Persistent storage system loaded successfully');
                } else {
                    console.log('⚠️ Persistent storage system not available - will use fallback');
                }
            }, 100);
        });
    </script>
</body>
</html>